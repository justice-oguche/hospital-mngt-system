<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0">
    <link rel="shortcut icon" type="image/x-icon" href="assets/img/SchemeLogo2.png">
    <title>BHIS - Bayelsa Health Insurance Scheme</title>
	
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" type="text/css" href="assets/css/bootstrap.min.css">
	
	<!-- Feathericon CSS -->
	<link rel="stylesheet" href="assets/plugins/feather/feather.css">
	
    <!-- Fontawesome CSS -->
    <link rel="stylesheet" href="assets/plugins/fontawesome/css/fontawesome.min.css">
    <link rel="stylesheet" href="assets/plugins/fontawesome/css/all.min.css">
	
	<!-- Main CSS -->
    <link rel="stylesheet" type="text/css" href="assets/css/style.css">
     
</head>
    <body>
	
		<!-- Main Wrapper -->
		<div class="main-wrapper login-body">
			<div class="container-fluid px-0">
				<div class="row">
				
					<!-- Login logo -->
					<div class="col-lg-6 login-wrap">
						<div class="login-sec">
							<div class="log-img">
								<img class="img-fluid" style="filter: blur(3px); -webkit-backdrop-filter: blur(3px); backdrop-filter: blur(3px);" src="assets/img/img2.jpeg" alt="Logo">
								<div class="top-left">
						          <p> Welcome To Bayelsa Health <br>Insurance Management System Account Management</p>
					            </div>
								<div class="bottom-left">
									<p> Affordable Healthcare for all Bayelsans </p>
								  </div>
								

							
							</div>
						</div>
					</div>
					<!-- /Login logo -->

					
					<!-- Login Content -->
					<div class="col-lg-6 login-wrap-bg">
						<div class="login-wrapper">
							<div class="loginbox">	
								<div class="login-right">
									<div class="login-right-wrap">
										<div class="account-logo">
											<a href="index.html"><img src="assets/img/SchemeLogo2.png" alt=""></a>
											<a style="float: right;" href="index.html"><img src="assets/img/StateLogoB.png" alt=""></a>


										</div>
										<h2>Login</h2>
										<div style="color: rgb(211, 32, 32); text-align: center; font-size: smaller; font-style: italic;" id="error"></div>

										<h6 style="text-align: center; color: rgb(158, 28, 28);" >please enter your details to login</h6>
										<!-- Form -->
										<form id="login-form">
											<div class="form-group">
												<label >Email <span class="login-danger">*</span></label>
												<input class="form-control" id="email" name="email" type="text" required>
											</div>
											<div class="form-group">
												<label >Password <span class="login-danger">*</span></label>
												<input class="form-control pass-input" id="password" name="password" type="password" required>
												<span class="profile-views feather-eye-off toggle-password"></span>
											</div>
											<div class="forgotpass">
												<div class="remember-me">
													<label class="custom_check mr-2 mb-0 d-inline-flex remember-me"> Remember me
													<input type="checkbox" name="radio">
													<span class="checkmark"></span>
													</label>
												</div>
												<a href="forgot-password.html">Forgot Password?</a>
											</div>
											<div class="form-group login-btn">
												<button class="btn btn-primary btn-block" type="submit" id="loginbtn">
													<span id="loginbtnText">Login</span>
													<span id="loader" style="display: none;">Loading...</span>
												  </button>
											</div>
										</form>
										<div id="loader" style="display: none;">
											<!-- Add your loader HTML or custom styling here -->
											Loading...
										  </div>
										<!-- /Form -->
										  
										<div class="next-sign">
											<p class="account-subtitle">Need an account?  <a href="register.html">Sign Up</a></p>
										
										</div>
									</div>
									<div class="foot-note" >
										<p style="float: right;">
											Powered by:
											<a href="https://compulectro.com/">Compulectro Infotech solutions</a>
										  </p>
																			  </div>
								</div>
							</div>
							
						</div>
					</div>
					<!-- /Login Content -->
					
				</div>
			</div>
		</div>
		<!-- /Main Wrapper -->
		
		<!-- jQuery -->
		<script src="assets/js/jquery-3.6.1.min.js"></script>
		
		<!-- Bootstrap Core JS -->
		<script src="assets/js/bootstrap.bundle.min.js"></script>
		
		<!-- Feather Js -->
		<script src="assets/js/feather.min.js"></script>
		
		<!-- Custom JS -->
		<script src="assets/js/app.js"></script>


		<script>
			const form = document.querySelector('form');
			const loginBtn = document.getElementById('loginbtn');
			const loginBtnText = document.getElementById('loginbtnText');
		  
			form.addEventListener('submit', async (e) => {
			  e.preventDefault();
		  
			  // Disable the login button
			  loginBtn.disabled = true;
		  
			  const email = document.querySelector('#email').value;
			  const password = document.querySelector('#password').value;
		  
			  // Show the loader and update the button text
			  loginBtnText.innerHTML = '<span id="loader">Loading...</span>';
		  
			  const response = await fetch('http://45.35.12.118:9004/login', {
				method: 'POST',
				headers: {
				  'Content-Type': 'application/json'
				},
				body: JSON.stringify({ email, password })
			  });
		  
			  const data = await response.json();
		  
			  // Restore the button text
			  loginBtnText.innerHTML = 'Login';
		  
			  // Enable the login button
			  loginBtn.disabled = false;
		  
			  if (response.ok) {
				localStorage.setItem('firstName', data.data.Firstname);
				localStorage.setItem('surname', data.data.Surname);
				localStorage.setItem('email', data.data.email);

				window.location.href = 'enrollee-dsh.html';
			  } else {
				const errorMessage = data.message || 'Incorrect email or password';
				const errorDiv = document.querySelector('#error');
				errorDiv.textContent = errorMessage;
				errorDiv.style.display = 'block';
			  }
			});
		  </script>
    </body>
</html>